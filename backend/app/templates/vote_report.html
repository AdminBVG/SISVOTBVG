<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial, sans-serif; color:#1f2937; }
    h1 { background:#005DAA; color:white; padding:1rem; }
    h2 { color:#005DAA; border-bottom:1px solid #eee; margin-top:2rem; }
    .summary, .attendees, .ballots { margin-top:1rem; }
    .attendees li { margin-bottom:0.25rem; }
    table { width:100%; border-collapse:collapse; margin-top:0.5rem; }
    th, td { padding:0.25rem 0.5rem; text-align:left; }
    .bar-wrap { background:#e5e7eb; height:1rem; }
    .bar { background:#005DAA; height:100%; color:white; text-align:right; font-size:0.75rem; line-height:1rem; padding-right:0.25rem; }
  </style>
</head>
<body>
  <h1>Informe de votación - {{ election.name }}</h1>
  <section class="summary">
    <h2>Resumen</h2>
    <p>Acciones presentes:
      {{ summary.capital_presente_directo + summary.capital_presente_representado }}
      ({{ (summary.porcentaje_quorum*100)|round(2) }}%)
    </p>
  </section>
  <section class="attendees">
    <h2>Asistentes</h2>
    <ul>
    {% for name in attendees %}
      <li>{{ name }}</li>
    {% endfor %}
    </ul>
  </section>
  {% for ballot in ballots %}
  <section class="ballots">
    <h2>{{ ballot.title }}</h2>
    <table>
      <thead>
        <tr><th>Opción</th><th>Votos</th><th>%</th></tr>
      </thead>
      <tbody>
      {% for r in ballot.results %}
        <tr>
          <td>{{ r.text }}</td>
          <td>{{ r.votes }}</td>
          <td>
            <div class="bar-wrap"><div class="bar" style="width:{{ r.pct }}%">{{ r.pct|round(2) }}%</div></div>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </section>
  {% endfor %}
</body>
</html>
